<html>
<body>

<div id="wptview" ng-app="wptview" ng-controller="wptviewController">
  <form name="fileInput" novalidate>
    <input name="logfile" type="file" id="log_file" custom-on-change="newFile">
    <input name="run" type="text" ng-model="run_name" required>
    <button ng-click="uploadFile()" ng-disabled="isFileEmpty || fileInput.$invalid">Crunch!</button>
    <button ng-click="clearTable()" ng-disabled="isGenerateDisabled">Clear!</button>
  </form>
  <br>

  <form ng-hide="isGenerateDisabled">
    <select ng-model="filter.run">
      <option ng-repeat="run in runs" value="{{ run.name }}">{{ run.name }}</option>
    </select>
    <input type="checkbox" ng-model="filter.negate">negate</input>
    <select ng-model="filter.status">
      <option value="PASS">PASS</option>
      <option value="SKIP">SKIP</option>
      <option value="ERROR">ERROR</option>
      <option value="FAIL">FAIL</option>
      <option value="OK">OK</option>
      <option value="TIMEOUT">TIMEOUT</option>
      <option value="NOTRUN">NOTRUN</option>
      <option value="CRASH">CRASH</option>
    </select>
    <button ng-click="fillTable()" ng-disabled="isGenerateDisabled">Generate!</button>
  </form>

  <table ng-table="resultsTable" border="1">
    <tr>
      <td rowspan="2">Test</td>
      <td rowspan="2">Subtest</td>
      <td colspan="2" ng-repeat="run in runs">{{ run.name }}</td>
    </tr>
    <tr>
        <td ng-repeat-start="run in runs">Expected</td>
        <td ng-repeat-end>Actual</td>
    </tr>
    <tr ng-repeat="result in results">
      <td>{{ result.test }}</td>
      <td>{{ result.subtest }}</td>
      <td ng-repeat-start="run in result.runs">{{ run.expected }}</td>
      <td ng-repeat-end>{{ run.status }}</td>
    </tr>
  </table>
  <p>
    {{ warning_message }}
  </p>
</div>
<script src="lf_scripts/lovefield.js"></script>
<script src="LovefieldService.js"></script>
<script src="logcruncher.js"></script>
<script src="angular.min.js"></script>
<script src="angular_scripts.js"></script>
</body>
</html>